- type: entity
  parent: BaseItem
  id: MCBaseDefibrillator
  name: emergency defibrillator
  description: A handheld emergency defibrillator, used to restore fibrillating patients. Can optionally bring people back from the dead.
  abstract: true
  components:
  - type: Sprite
    sprite: _MC/Objects/Medical/defib.rsi
    layers:
    - state: defib
    - state: defib_on
      map: [ "enum.ToggleableVisuals.Layer" ]
      visible: false
  - type: Appearance
  - type: GenericVisualizer
    visuals:
      enum.ToggleableVisuals.Enabled:
        enum.ToggleableVisuals.Layer:
          True: { visible: true }
          False: { visible: false }
  - type: MeleeWeapon
    attackRate: 0.9
    damage:
      groups:
        Brute: 5
    soundHit:
      collection: GenericHit
  - type: DamageOtherOnHit
    damage:
      groups:
        Brute: 6
  - type: Item
    size: Normal
    sprite: _MC/Objects/Medical/defib.rsi
    heldPrefix: defib
  - type: Speech
    speechVerb: Robotic
  - type: ItemToggle
    soundActivate:
      path: /Audio/_RMC14/Medical/defib_SafetyOn.ogg
    soundDeactivate:
      path: /Audio/_RMC14/Medical/defib_safetyOff.ogg
  - type: Clothing
    quickEquip: false
    slots:
    - belt
  - type: Defibrillator
    zapDelay: 0
    doAfterDuration: 7.5
    allowDoAfterMovement: false
    canDefibCrit: false
    cmZapHeal:
    - Brute: -10
    - Burn: -10
    - Toxin: -10
    - Genetic: -10
    zapHeal:
      groups:
        Airloss: -400
    zapSound:
      path: /Audio/_RMC14/Medical/defib_release.ogg
      params:
        volume: -1
    chargeSound:
      path: /Audio/_RMC14/Medical/defib_charge.ogg
      params:
        volume: -1
    failureSound:
      path: /Audio/_RMC14/Medical/defib_failed.ogg
      params:
        volume: -1
    successSound:
      path: /Audio/_RMC14/Medical/defib_success.ogg
      params:
        volume: -1
    readySound:
      path: /Audio/_RMC14/Medical/defib_ready.ogg
      params:
        volume: -1
    zapDamage: 0
  - type: DoAfter
  - type: UseDelay
  - type: StaticPrice
    price: 100

- type: entity
  id: MCDefibrillator
  parent: [MCBaseDefibrillator, RMCPowerCellSlotUnremovable]
  suffix: MC
  components:
  - type: PowerCellDraw
    enabled: false
    useRate: 66
  - type: RMCPowerUsageDisplay

- type: entity
  id: MCDefibrillatorEmpty
  parent: MCDefibrillator
  suffix: MC, Empty
  components:
  - type: ItemSlots
    slots:
      cell_slot:
        name: power-cell-slot-component-slot-name-default

- type: entity
  parent: MCBaseDefibrillator
  id: MCBaseDefibrillatorAdvanced
  abstract: true
  name: advanced emergency defibrillator
  description: A device that delivers powerful shocks to resuscitate incapacitated patients. Allows to ignore armor, covering the heart, and doesn't damage the heat itself at the cost of increased charge consumption.
  components:
  - type: Sprite
    sprite: _MC/Objects/Medical/civdefib.rsi
    layers:
    - state: defib
    - state: defib_on
      map: [ "enum.ToggleableVisuals.Layer" ]
      visible: false
  - type: Item
    size: Normal
    sprite: _MC/Objects/Medical/civdefib.rsi
    heldPrefix: defib
  - type: MCDefibrillatorNoBlock

- type: entity
  id: MCDefibrillatorAdvanced
  parent: [MCBaseDefibrillatorAdvanced, RMCPowerCellSlotUnremovable]
  suffix: MC
  components:
  - type: PowerCellDraw
    enabled: false
    useRate: 100
  - type: RMCPowerUsageDisplay

- type: entity
  id: MCDefibrillatorAdvancedEmpty
  parent: MCDefibrillatorAdvanced
  suffix: MC, Empty
  components:
  - type: ItemSlots
    slots:
      cell_slot:
        name: power-cell-slot-component-slot-name-default
